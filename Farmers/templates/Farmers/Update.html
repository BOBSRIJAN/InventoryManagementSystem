{% extends "Farmers/FarmerDashboard.html" %}
{% load static %}

{% block content %}
<main class="max-w-full mx-auto py-8 px-6 grid grid-cols-1 xl:grid-cols-4 gap-8">
  <div class="bg-white/40 shadow-xl rounded-2xl p-8 border border-gray-200">
    <h2 class="text-3xl font-bold text-indigo-600 mb-8 text-center">
      <i class="fas fa-warehouse mr-2"></i>Add / Edit Item
    </h2>

    <form method="POST" enctype="multipart/form-data" class="space-y-6">
      {% csrf_token %}

      <!-- Item Name -->
      <div>
        <label for="name" class="block text-sm font-semibold text-gray-700 mb-1">
          <i class="fas fa-box-open text-indigo-600 mr-2"></i>Item Name
        </label>
        <input type="text" id="name" name="name" required
               value="{{ items.name|default_if_none:'' }}"
               class="w-full px-4 py-2 border border-gray-300 rounded-xl shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"
               placeholder="e.g. Tomatoes">
      </div>

      <!-- Quantity -->
      <div>
        <label for="quantity" class="block text-sm font-semibold text-gray-700 mb-1">
          <i class="fas fa-sort-numeric-up text-indigo-600 mr-2"></i>Quantity
        </label>
        <input type="number" id="quantity" name="quantity" required
               value="{{ items.quantity|default_if_none:'' }}"
               class="w-full px-4 py-2 border border-gray-300 rounded-xl shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"
               placeholder="e.g. 100">
      </div>

      <!-- Category -->
      <div>
        <label for="category" class="block text-sm font-semibold text-gray-700 mb-1">
          <i class="fas fa-tags text-indigo-600 mr-2"></i>Category
        </label>
        <input type="text" id="category" name="category" required
               value="{{ items.category|default_if_none:'' }}"
               class="w-full px-4 py-2 border border-gray-300 rounded-xl shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"
               placeholder="e.g. Vegetables">
      </div>

      <!-- Price -->
      <div>
        <label for="price" class="block text-sm font-semibold text-gray-700 mb-1">
          <i class="fas fa-indian-rupee-sign text-indigo-600 mr-2"></i>Price
        </label>
        <input type="number" step="0.01" id="price" name="price" required
               value="{{ items.price|default_if_none:'' }}"
               class="w-full px-4 py-2 border border-gray-300 rounded-xl shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"
               placeholder="e.g. 50.00">
      </div>

      <!-- Image -->
      <div>
        <label for="image" class="block text-sm font-semibold text-gray-700 mb-1">
          <i class="fas fa-image text-indigo-600 mr-2"></i>Item Image
        </label>
        <input type="file" id="image" name="image"
               class="w-full text-sm text-gray-700 file:py-2 file:px-4 file:rounded-xl file:bg-indigo-600 file:text-white hover:file:bg-indigo-700 cursor-pointer">
        {% if items.image %}
          <img src="{{ items.image.url }}" alt="Item Image" class="mt-4 h-32 rounded-lg shadow border">
        {% endif %}
      </div>

      <!-- Submit -->
      <div class="pt-4">
        <button type="submit"
                class="w-full py-3 px-6 bg-indigo-600 text-white text-sm font-semibold rounded-xl shadow-md hover:bg-indigo-700 transition duration-300">
          <i class="fas fa-paper-plane mr-2"></i>Submit
        </button>
      </div>
    </form>
  </div>

{% comment %} <!-- MarketPlace Items Column -->
<div class="bg-white/40 shadow-xl rounded-2xl p-6 border border-gray-200 col-span-2">
  <h2 class="text-2xl font-bold text-indigo-600 mb-4">
    <i class="fas fa-store mr-2"></i>My Market Items
  </h2>

  {% if market_items %}
    <ul class="space-y-4">
      {% for item in market_items %}
        <li class="p-4 border rounded-xl shadow bg-white hover:shadow-md transition">
          <div class="flex items-start gap-4">
            {% if item.image %}
              <img src="{{ item.image.url }}" alt="{{ item.name }}" class="w-16 h-16 object-cover rounded-lg border">
            {% else %}
              <div class="w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center text-gray-500">
                <i class="fas fa-image"></i>
              </div>
            {% endif %}
            <div class="flex-1">
              <h3 class="text-lg font-semibold text-gray-800">{{ item.name }}</h3>
              <p class="text-sm text-gray-600">Category: {{ item.category }}</p>
              <p class="text-sm text-gray-600">Quantity: {{ item.quantity }}</p>
              <p class="text-sm text-gray-800 font-bold mt-1">â‚¹{{ item.price }}</p>
            </div>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-sm text-gray-600">No items in marketplace.</p>
  {% endif %}
</div> {% endcomment %}

</main>
{% endblock %}